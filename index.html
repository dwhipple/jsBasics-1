<html>

	<head>

		<script src="js/jquery.js"></script>
		<script>

		$(window).load(init);

		function init(){
			b = new trigBlocks();
			b.colorThem();
			b.addListeners();
			b.clickMe()

		}
			

		var trigBlocks= function(){
				colors = ['red', 'blue', 'yellow'];
			
				whichElem = 0;
				this.clickMe= function(){

					thisElem = this;
					if($('.thingy').hasClass('active')){
						return false;
					}
					else{

						setTimeout(function(){
							$('.thingy').html('');
							$('.thingy:nth('+whichElem+')').html('click me!').css({"padding":"20px", "color":"white", "font-size":"16px"})

							if(whichElem < $('.thingy').length){
								whichElem = whichElem +1;
							}
							else{
								whichElem=0;
							}
							thisElem.clickMe();

						},3000)
					}
				}

				this.colorThem= function(){
					

					$('.thingy').each(function(index){

						
						$(this).css({'background-color':colors[index]})

					})
				}

				this.addListeners= function(){
					whichOne = 0;
					$('.thingy').on('click', function(){

							$(this).attr('original', $(this).css('background-color'))

							if($(this).hasClass('active')){
								return false;
							}
							
							$(this).addClass('active');
							aniWidth= "90%";
							switch(whichOne){
								case 0:
									aniLeft = "90%";
									aniTop ="60%"
									tColor="green";
								break;
								case 1:
									aniLeft = "50%";
									aniTop = "-30%";
									tColor="orange";
								break;
								case 2:
									aniLeft = "20%";
									aniTop= "30%";
									tColor="purple";
								break;
							}

							$(this).animate({"left": aniLeft, "top":aniTop});
							$(this).css({'background-color':
								tColor});
							whichOne=whichOne+1;
							if(whichOne >2){
								
								setTimeout(function(){
										$('.thingy').animate({"left":"0%", "top":"0%"})
										$('.thingy').each(function(){

											$(this).css({'background-color':$(this).attr('original')})
										})
								}, 2000);
								$('.thingy').removeClass('active');
								whichOne=0;
							}


					})
				}


			}

		</script>
		<style>
		.thingy{
			height:100px;
			width:100px;
			background-color:blue;
			margin:10px;
			display:block;
			left:0%;
			position:relative;
		}

		</style>




	</head>

	<body>

		<div class="thingy"></div>
		<div class="thingy"></div>
		<div class="thingy"></div>

	</body>


</html>